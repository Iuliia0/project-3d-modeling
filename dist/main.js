(()=>{"use strict";(e=>{const t=document.getElementById("timer-hours"),o=document.getElementById("timer-minutes"),n=document.getElementById("timer-seconds");let r;const a=e=>e<10?"0"+e:e,c=()=>{let e=(()=>{let e=(new Date("15 january 2022").getTime()-(new Date).getTime())/1e3;return{timeRemaining:e,hours:Math.floor(e/60/60),minutes:Math.floor(e/60%60),seconds:Math.floor(e%60)}})();e.timeRemaining>0?(t.textContent=a(e.hours),o.textContent=a(e.minutes),n.textContent=a(e.seconds)):(t.textContent="00",o.textContent="00",n.textContent="00",clearInterval(r))};c(),r=setInterval(c,1e3)})(),(()=>{const e=document.querySelector("menu"),t=document.querySelector("body"),o=()=>{e.classList.toggle("active-menu")};t.addEventListener("click",(t=>{(t.target.classList.contains("close-btn")||t.target.matches("ul>li>a")||t.target.matches(".menu>img"))&&o(),!e.classList.contains("active-menu")||t.target.closest(".active-menu")||t.target.matches(".menu>img")||o()}))})(),(()=>{const e=document.querySelectorAll(".popup-btn"),t=document.querySelector(".popup"),o=document.querySelector(".popup-content");let n;e.forEach((e=>{o.style.top="0",e.addEventListener("click",(()=>{(({timing:e,draw:t,duration:o})=>{let n=performance.now();requestAnimationFrame((function r(a){let c=(a-n)/o;c>1&&(c=1);let l=e(c);t(l),c<1&&requestAnimationFrame(r)}))})({duration:1e3,timing:e=>e,draw(e){n=document.documentElement.offsetWidth,n>768?(t.style.display="block",o.style.top=20*e+"%"):n<=768&&(t.style.display="block",o.style.top="200px")}})}))})),t.addEventListener("click",(e=>{e.target.closest(".popup-content")&&!e.target.classList.contains("popup-close")||(t.style.display="none")})),(()=>{const e=document.querySelectorAll('a[href*="#"]');for(let t of e)t.classList.contains("close-btn")||t.addEventListener("click",(function(e){e.preventDefault();const o=t.getAttribute("href").substr(1);""!==o&&document.getElementById(o).scrollIntoView({behavior:"smooth",block:"start"})}))})()})(),(()=>{const e=document.querySelector(".calc-block").querySelectorAll('input[type="text"]'),t=document.querySelector('input[name="user_message"]'),o=/[^а-я \s \-]/gi,n=/[^а-я0-9 \s\.\,\:\;\'\"\-]/gi,r=/([^\@  \_ \. \! \~ \* \' \w \-]+)/gi,a=/([\+7|7|8])[(]?(\d{3})[)]?(\d{3})[-]?(\d{2})[-]?(\d{2})/g,c=/^[0-9]+/g;e.forEach((e=>{e.type="",e.addEventListener("input",(e=>{e.target.value=e.target.value.match(c,"")}))}));const l=document.querySelectorAll('input[type="text"]'),s=document.querySelectorAll('input[type="email"]'),i=document.querySelectorAll('input[type="tel"]');l.forEach((e=>{e.addEventListener("change",(e=>{e.target.value=e.target.value.replace(o,"").trim()}))})),s.forEach((e=>{e.addEventListener("change",(e=>{e.target.value=e.target.value.replace(r,"").trim()}))})),i.forEach((e=>{e.addEventListener("blur",(t=>{a.test(t.target.value)?e.value=t.target.value:e.value=t.target.value.replace(/[а-яa-z \ё \Ё \@  \_ \. \! \~ \* \' \: \; \" \# \№ \^ \&]+/g,"").replace(/\++/g,"+").replace(/^\d\(\)\-\+/g,"").replace(/^[\-\s]+/gm,"").replace(/[\-\s]+$/gm,"")}))})),t.addEventListener("input",(e=>{e.target.value=e.target.value.replace(n,"")}))})(),(()=>{const e=document.querySelector(".service-header"),t=document.querySelectorAll(".service-header-tab"),o=document.querySelectorAll(".service-tab");e.addEventListener("click",(e=>{if(e.target.closest(".service-header-tab")){const n=e.target.closest(".service-header-tab");t.forEach(((e,t)=>{e===n?(e.classList.add("active"),o[t].classList.remove("d-none")):(e.classList.remove("active"),o[t].classList.add("d-none"))}))}}))})(),(({containerSlider:e,itemSlider:t,containerDot:o})=>{const n=document.querySelector(e),r=document.querySelectorAll(t),a=document.querySelector(o),c=[n,r,a];for(let e=0;e<=c.length;e++)if(null===c[e]||0===c[e])return;let l,s=[],i=0;const u=(e,t,o)=>{e[t].classList.remove(o)},d=(e,t,o)=>{e[t].classList.add(o)},m=()=>{u(r,i,"portfolio-item-active"),u(s,i,"dot-active"),i++,i>=r.length&&(i=0),d(r,i,"portfolio-item-active"),d(s,i,"dot-active")},p=(e=1500)=>{l=setInterval(m,e)};n.addEventListener("click",(e=>{e.preventDefault(),e.target.matches(".dot, .portfolio-btn")&&(u(r,i,"portfolio-item-active"),u(s,i,"dot-active"),e.target.matches("#arrow-right")?i++:e.target.matches("#arrow-left")?i--:e.target.classList.contains("dot")&&s.forEach(((t,o)=>{e.target===t&&(i=o)})),i>=r.length&&(i=0),i<0&&(i=r.length-1),d(r,i,"portfolio-item-active"),d(s,i,"dot-active"))})),n.addEventListener("mouseenter",(e=>{e.target.matches(".dot, .portfolio-btn")&&clearInterval(l)}),!0),n.addEventListener("mouseleave",(e=>{e.target.matches(".dot, .portfolio-btn")&&p(2e3)}),!0),p(2e3),(()=>{let e;for(let t=1;t<=r.length;t++)e=document.createElement("li"),e.classList.add("dot"),s.push(e),a.append(e);s[0].classList.add("dot-active"),r[0].classList.add("portfolio-item-active")})()})({containerSlider:".portfolio-content",itemSlider:".portfolio-item",containerDot:".portfolio-dots"}),((e=100)=>{const t=document.querySelector(".calc-block"),o=document.querySelector(".calc-type"),n=document.querySelector(".calc-square"),r=document.querySelector(".calc-count"),a=document.querySelector(".calc-day"),c=document.getElementById("total");t.addEventListener("input",(t=>{t.target!==o&&t.target!==n&&t.target!==r&&t.target!==a||(()=>{const t=+o.options[o.selectedIndex].value,l=n.value;let s=0,i=1,u=1;r.value>1&&(i+=+r.value/10),a.value&&a.value<5?u=2:a.value&&a.value<10&&(u=1.5),s=o.value&&n.value?Math.round(e*l*t*i*u):0,c.textContent=s})()}))})(100),(({idForms:e=[],someElem:t=[]})=>{e.forEach((e=>{let o=document.querySelector(`#${e}`);const n=document.createElement("div"),r=()=>{n.textContent="",document.querySelector(".popup").style.display="none"};try{if(!o)throw new Error("Верните форму на место, пожалуйста)");o.addEventListener("submit",(e=>{e.preventDefault(),(()=>{const e=o.querySelectorAll("input"),a=new FormData(o),c={};n.textContent="Загрузка",o.append(n),a.forEach(((e,t)=>{c[t]=e})),t.forEach((e=>{const t=document.getElementById(e.id);+t.textContent>0&&("block"===e.type?c[e.id]=t.textContent:"input"===e.type&&(c[e.id]=t.value))}));for(let e in c)c[e]=c[e].trim();var l;(l=c,fetch("https://jsonplaceholder.typicode.com/posts",{method:"POST",body:JSON.stringify(l),headers:{"Content-type":"application/json"}}).then((e=>e.json()))).then((t=>{n.textContent="Спасибо! Наш менеджер с Вами свжется",e.forEach((e=>{e.value=""})),setTimeout(r,2e3)})).catch((e=>{n.textContent="Ошибка"}))})()}))}catch(e){console.log(e.message)}}))})({idForms:["form1","form2","form3"],someElem:[{type:"block",id:"total"}]})})();